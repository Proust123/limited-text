<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <title>Document</title>

    <style>
      textarea {
        width: 400px;
        height: 50px;
      }
      .red {
        color: red;
      }
    </style>
  </head>
  <body>
    <div>
      <textarea name="" id="" cols="30" rows="10" class="txtLimits"></textarea>
      <div class="output"></div>
    </div>

    <script>
      // const output = document.querySelector('.output');
      // const txt = document.querySelector('textarea');
      const output = $('.output');
      const txt = $('textarea');

      txt.on('change', textCounter);
      txt.on('keyup', textCounter);
      // txt.addEventListener('keydown', textCounter);

      // ["keyup","keydown","change"].forEach(function(e){
      //   console.log(e);
      //   txt.addEventListener(e, textCounter)
      // })

      const maxLength = 20;
      const warnLength = 7;

      function textCounter(e) {
        // console.log(txt.value, 'value');
        // console.log(e);
        let count = txt.val().length;
        // console.log(count);

        // var value = txt.value;
        if (count > maxLength) {
          txt.val() = txt.val().slice(0, maxLength);
          // var subvalue = value.substring(0, maxLength);
          // txt.value = subvalue;
        }

        if (count > warnLength) {
          output.addClass('red');
        } else {
          output.removeClass('red');
        }

        output.html(maxLength - count + ' Characters Left');
      }
    </script>
  </body>
</html>
